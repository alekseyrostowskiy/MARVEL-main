{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex\\\\Desktop\\\\\\u041F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\\\\FrontEnd\\\\MARVEL-main\\\\MARVEL-main\\\\src\\\\components\\\\comicsList\\\\ComicsList.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport useMarvelService from \"../../services/MarvelService\";\nimport \"./comicsList.scss\";\nimport Spinner from \"../spinner/Spinner\";\nimport ErrorMessage from \"../errorMessage/ErrorMessage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst setContent = (process, Component, newItemLoading) => {\n  switch (process) {\n    case \"waiting\":\n      return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 14\n      }, this);\n      break;\n    case \"loading\":\n      return newItemLoading ? /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 9\n      }, this) : /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 9\n      }, this); /* создали отдельную функцию, потому что наш компонент работает немножко иначе из-за наличия newItemLoading  */\n      break;\n    case \"confirmed\":\n      return /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 14\n      }, this);\n      break;\n    case \"error\":\n      return /*#__PURE__*/_jsxDEV(ErrorMessage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 14\n      }, this);\n      break;\n  }\n};\nconst ComicsList = () => {\n  _s();\n  const [comicsList, setComicsList] = useState([]);\n  const [offset, setOffset] = useState(1);\n  const [comicsEnded, setComicsEnded] = useState(false);\n  const [newItemLoading, setNewItemLoading] = useState(false);\n  const {\n    getAllComics,\n    loading,\n    error,\n    clearError,\n    process,\n    setProcess\n  } = useMarvelService();\n  useEffect(() => {\n    updateComicsList(offset, true);\n  }, []);\n  const updateComicsList = (offset, initial) => {\n    initial ? setNewItemLoading(false) : setNewItemLoading(true);\n    getAllComics(offset).then(onComicsListLoaded).then(() => setProcess(\"confirmed\"));\n    clearError();\n  };\n  const onComicsListLoaded = newComicsList => {\n    let ended = false;\n    if (newComicsList.length < 8) {\n      ended = true;\n    }\n    setComicsList(comicsList => [...comicsList, ...newComicsList]);\n    setNewItemLoading(true);\n    setOffset(offset => offset + 9);\n    setComicsEnded(ended);\n  };\n  function renderComicsList(comicsList) {\n    const items = comicsList.map((item, i) => {\n      let imgStyle = {\n        objectFit: \"cover\"\n      };\n      if (item.thumbnail === \"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg\") {\n        imgStyle = {\n          objectFit: \"unset\"\n        };\n      }\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"comics__item\",\n        tabIndex: 0,\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: `/comics/${item.id}`,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.thumbnail,\n            alt: item.name,\n            className: \"comics__item-img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comics__item-name\",\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comics__item-price\",\n            children: item.price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"comics__grid\",\n      children: items\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comics__list\",\n    children: [setContent(process, () => renderComicsList(comicsList), newItemLoading), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button button__main button__long\",\n      style: {\n        display: comicsEnded ? \"none\" : \"block\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inner\",\n        onClick: () => updateComicsList(offset),\n        children: \"load more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s(ComicsList, \"tZRcm3qswGZgFc1iQs4FpquQRMw=\", false, function () {\n  return [useMarvelService];\n});\n_c = ComicsList;\nexport default ComicsList;\nvar _c;\n$RefreshReg$(_c, \"ComicsList\");","map":{"version":3,"names":["useState","useEffect","Link","useMarvelService","Spinner","ErrorMessage","jsxDEV","_jsxDEV","setContent","process","Component","newItemLoading","fileName","_jsxFileName","lineNumber","columnNumber","ComicsList","_s","comicsList","setComicsList","offset","setOffset","comicsEnded","setComicsEnded","setNewItemLoading","getAllComics","loading","error","clearError","setProcess","updateComicsList","initial","then","onComicsListLoaded","newComicsList","ended","length","renderComicsList","items","map","item","i","imgStyle","objectFit","thumbnail","className","tabIndex","children","to","id","src","alt","name","title","price","style","display","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Alex/Desktop/Программирование/FrontEnd/MARVEL-main/MARVEL-main/src/components/comicsList/ComicsList.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport useMarvelService from \"../../services/MarvelService\";\nimport \"./comicsList.scss\";\nimport Spinner from \"../spinner/Spinner\";\nimport ErrorMessage from \"../errorMessage/ErrorMessage\";\n\nconst setContent = (process, Component, newItemLoading) => {\n  switch (process) {\n    case \"waiting\":\n      return <Spinner />;\n      break;\n    case \"loading\":\n      return newItemLoading ? (\n        <Component />\n      ) : (\n        <Spinner />\n      ); /* создали отдельную функцию, потому что наш компонент работает немножко иначе из-за наличия newItemLoading  */\n      break;\n    case \"confirmed\":\n      return <Component />;\n      break;\n    case \"error\":\n      return <ErrorMessage />;\n      break;\n  }\n};\n\nconst ComicsList = () => {\n  const [comicsList, setComicsList] = useState([]);\n  const [offset, setOffset] = useState(1);\n  const [comicsEnded, setComicsEnded] = useState(false);\n  const [newItemLoading, setNewItemLoading] = useState(false);\n\n  const { getAllComics, loading, error, clearError, process, setProcess } =\n    useMarvelService();\n\n  useEffect(() => {\n    updateComicsList(offset, true);\n  }, []);\n\n  const updateComicsList = (offset, initial) => {\n    initial ? setNewItemLoading(false) : setNewItemLoading(true);\n    getAllComics(offset)\n      .then(onComicsListLoaded)\n      .then(() => setProcess(\"confirmed\"));\n    clearError();\n  };\n\n  const onComicsListLoaded = (newComicsList) => {\n    let ended = false;\n    if (newComicsList.length < 8) {\n      ended = true;\n    }\n\n    setComicsList((comicsList) => [...comicsList, ...newComicsList]);\n    setNewItemLoading(true);\n    setOffset((offset) => offset + 9);\n    setComicsEnded(ended);\n  };\n\n  function renderComicsList(comicsList) {\n    const items = comicsList.map((item, i) => {\n      let imgStyle = { objectFit: \"cover\" };\n      if (\n        item.thumbnail ===\n        \"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg\"\n      ) {\n        imgStyle = { objectFit: \"unset\" };\n      }\n\n      return (\n        <li className=\"comics__item\" tabIndex={0} key={i}>\n          <Link to={`/comics/${item.id}`}>\n            <img\n              src={item.thumbnail}\n              alt={item.name}\n              className=\"comics__item-img\"\n            />\n            <div className=\"comics__item-name\">{item.title}</div>\n            <div className=\"comics__item-price\">{item.price}</div>\n          </Link>\n        </li>\n      );\n    });\n    return <ul className=\"comics__grid\">{items}</ul>;\n  }\n\n  return (\n    <div className=\"comics__list\">\n      {setContent(process, () => renderComicsList(comicsList), newItemLoading)}\n      <button\n        className=\"button button__main button__long\"\n        style={{ display: comicsEnded ? \"none\" : \"block\" }}\n      >\n        <div className=\"inner\" onClick={() => updateComicsList(offset)}>\n          load more\n        </div>\n      </button>\n    </div>\n  );\n};\n\nexport default ComicsList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}